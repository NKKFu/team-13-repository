<!DOCTYPE html>
<html>

<head>
    <title>Hello world</title>
</head>
<script src="https://cdnjs.cloudflare.com/ajax/libs/socket.io/2.3.0/socket.io.js"></script>
<link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.1.3/css/bootstrap.min.css"
    integrity="sha384-MCw98/SFnGE8fJT3GXwEOngsV7Zt27NXFoaoApmYm81iuXoPkFOJwJ8ERdknLPMO" crossorigin="anonymous">

<script>
    let socket;

    let roomID;

    function ConnectToServer(key) {
        socket = io('http://localhost:3000/');
        socket.on('connect', function (data) {
            socket.emit('JoinRoom', key);
        });

        socket.on('connectToRoom', function (data) {
            console.log('My room ID is ' + data);
            roomID = data;
        });

        socket.on('message', function (author, msg) {
            console.log(author + ' -> ' + msg);
        });
    }

    function sendMessage() {
        console.log('hei');
        socket.emit('messageToServer', 'Nelson', roomID, document.getElementById('chat-input').value);
    }
</script>

<body>
    <div>
        Aguarde até encontrarmos um atendente para você.
        <button onclick="ConnectToServer('admin')">ADMIN</button>
        <button onclick="ConnectToServer()">USER</button>
        <br />

        <div class="" id="msg-history">
            Ol´qfiruhqwe
        </div>

        <form>
            <div class="row">
                <div class="col">
                    <input type="text" class="form-control" placeholder="First name">
                </div>
                <div class="col">
                    <input type="text" class="form-control" placeholder="Last name">
                </div>
            </div>
        </form>

        <input id="chat-input">
        <button onclick="sendMessage()">ENVIAR</button>
    </div>
</body>

</html>